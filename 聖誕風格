<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ğŸ„ Christmas Slots | è–èª•åƒè§’å­è€è™æ©Ÿ</title>
  <style>
    :root{
      --red:#d62828; --green:#2a9d8f; --gold:#ffd166; --snow:#ffffff; --bg1:#0b132b; --bg2:#1c2541; --bg3:#3a506b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, "PingFang TC", "Microsoft JhengHei", sans-serif;
      color:#fff; background: radial-gradient(1200px 600px at 20% 20%, #143d5d 0%, #0b132b 60%), linear-gradient(160deg, var(--bg1), var(--bg2), var(--bg3));
      overflow-x:hidden;
    }

    /* é£„é›ªæ•ˆæœ */
    .snow{ position:fixed; inset:0; pointer-events:none; z-index:0 }
    .snow span{
      position:absolute; top:-10vh; width:6px; height:6px; border-radius:50%; background:rgba(255,255,255,.9);
      filter:drop-shadow(0 0 6px rgba(255,255,255,.6));
      animation: fall linear infinite;
    }
    @keyframes fall{ to{ transform:translate3d(var(--tx,0), 110vh, 0) rotate(360deg) } }

    .wrap{ position:relative; z-index:1; min-height:100%; display:grid; place-items:center; padding:28px }

    .title{
      text-align:center; margin:0 0 18px; font-weight:900; letter-spacing:1px;
      text-shadow: 0 2px 0 #0008, 0 0 16px rgba(255,209,102,.5);
    }
    .subtitle{ text-align:center; margin:-6px 0 26px; color:#e6f0ff; opacity:.9 }

    .machine{
      width:min(680px, 92vw);
      border-radius:22px;
      background: linear-gradient(180deg, #0d1b2a, #0b132b 40%, #0d1b2a);
      box-shadow:
        0 0 0 6px #1b2a41 inset,
        0 0 0 10px #0f1d33 inset,
        0 30px 60px rgba(0,0,0,.6),
        0 0 50px 10px rgba(255, 209, 102, .08);
      position:relative; padding:22px 22px 18px; border:2px solid #15233a;
    }

    /* éœ“è™¹ç‡ˆæ³¡é‚Šæ¡† */
    .bulbs{ position:absolute; inset:-6px; pointer-events:none; filter: drop-shadow(0 0 10px rgba(255, 209, 102, .5)); }
    .bulbs i{ position:absolute; width:10px; height:10px; border-radius:50%; background:var(--gold); box-shadow:0 0 10px var(--gold), 0 0 18px var(--gold); }

    .reels{
      display:grid; grid-template-columns:1fr 1fr 1fr; gap:14px;
      padding:16px; border-radius:16px; background:linear-gradient(180deg, #10243e, #0d1e33);
      box-shadow: inset 0 10px 30px rgba(0,0,0,.5);
    }
    .reel{
      aspect-ratio: 1 / 1; border-radius:14px; display:grid; place-items:center; font-size:64px; background:#051225;
      box-shadow:inset 0 -4px 20px rgba(0,0,0,.8), inset 0 6px 10px rgba(255,255,255,.05);
      position:relative; overflow:hidden;
    }
    .reel.spinning{ animation: reelGlow 0.6s linear infinite alternate }
    @keyframes reelGlow{ from{ box-shadow:inset 0 -4px 20px rgba(0,0,0,.8), 0 0 12px rgba(255,209,102,.25) } to{ box-shadow:inset 0 -4px 20px rgba(0,0,0,.8), 0 0 24px rgba(255,209,102,.75) } }

    .panel{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; margin-top:16px }
    .stats{ display:flex; gap:10px; flex-wrap:wrap }
    .chip{ background:#06162c; padding:10px 14px; border-radius:12px; border:1px solid #1a3154; box-shadow: inset 0 1px 0 rgba(255,255,255,.06) }
    .chip strong{ color:var(--gold) }

    .controls{ display:flex; flex-wrap:wrap; gap:10px; align-items:center }
    select, button{ font: inherit }
    .select{ appearance:none; background:#06162c; color:#fff; border:1px solid #1a3154; border-radius:12px; padding:10px 36px 10px 12px; position:relative }
    .select:after{ content:"â–¾"; position:absolute; right:12px; top:50%; transform:translateY(-50%); opacity:.8 }

    .btn{
      padding:12px 18px; border:0; border-radius:999px; cursor:pointer; font-weight:800; letter-spacing:.5px; transition: transform .08s ease, filter .2s ease, box-shadow .2s ease;
      color:#1b1b1b; background:linear-gradient(180deg, #ffe08a, #ffc34d); box-shadow: 0 8px 18px rgba(255, 195, 77, .35);
    }
    .btn:hover{ filter:brightness(1.05) }
    .btn:active{ transform: translateY(1px) scale(.99) }
    .btn[disabled]{ opacity:.5; filter:grayscale(1); cursor:not-allowed }

    .message{ margin-top:10px; min-height:26px; font-weight:700; letter-spacing:.5px }
    .message.win{ color:#a7f3d0 }
    .message.lose{ color:#fca5a5 }

    /* è³ ç‡è¡¨ */
    .paytable{ margin-top:16px; background:#06162c; border:1px solid #1a3154; border-radius:14px; padding:12px }
    .paytable h3{ margin:0 0 8px; font-size:14px; letter-spacing:1px; color:#bfe3ff; opacity:.9 }
    .grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap:8px }
    .card{ background:#0a1a30; border:1px solid #1a3154; border-radius:10px; padding:8px 10px; display:flex; align-items:center; gap:8px; font-size:14px }
    .badge{ font-size:20px }

    /* footer */
    footer{ margin-top:22px; text-align:center; font-size:12px; opacity:.8 }

    /* å°è¢å¹•èª¿æ•´ */
    @media (max-width:480px){ .reel{ font-size:50px } }
  </style>
</head>
<body>
  <div class="snow" aria-hidden="true" id="snow"></div>

  <main class="wrap">
    <header>
      <h1 class="title">ğŸ° Christmas Slots â€“ è–èª•åƒè§’å­è€è™æ©Ÿ</h1>
      <p class="subtitle">æ‹‰æ¡¿ï¼ˆæŒ‰ä¸‹ SPINï¼‰å‘è–èª•è€äººè¨±å€‹é¡˜ï¼Œçœ‹çœ‹å¹¸é‹æ˜¯å¦é™è‡¨ âœ¨</p>
    </header>

    <section class="machine" aria-label="Slot Machine">
      <div class="bulbs" aria-hidden="true" id="bulbs"></div>

      <div class="reels" role="group" aria-label="Reels">
        <div class="reel" id="r0" aria-live="polite">ğŸ„</div>
        <div class="reel" id="r1" aria-live="polite">ğŸ</div>
        <div class="reel" id="r2" aria-live="polite">â„ï¸</div>
      </div>

      <div class="panel">
        <div class="stats">
          <div class="chip" id="balance">é¤˜é¡ï¼š<strong>$100</strong></div>
          <div class="chip" id="lastWin">ä¸Šæ¬¡è´å¾—ï¼š<strong>$0</strong></div>
        </div>
        <div class="controls">
          <label class="select">
            <select id="bet">
              <option value="1">ä¸‹æ³¨ $1</option>
              <option value="5" selected>ä¸‹æ³¨ $5</option>
              <option value="10">ä¸‹æ³¨ $10</option>
              <option value="20">ä¸‹æ³¨ $20</option>
            </select>
          </label>
          <button class="btn" id="spin">SPIN</button>
          <button class="btn" id="reset" title="é‡ç½®">é‡ç½®</button>
        </div>
      </div>

      <div class="message" id="msg" aria-live="polite"></div>

      <div class="paytable" aria-label="Pay Table">
        <h3>è³ ç‡è¡¨ï¼ˆä»¥ä¸‹æ³¨é‡‘é¡ç‚ºåŸºæº–ï¼‰</h3>
        <div class="grid">
          <div class="card"><span class="badge">ğŸ…ğŸ…ğŸ…</span> Ã—50</div>
          <div class="card"><span class="badge">ğŸğŸğŸ</span> Ã—20</div>
          <div class="card"><span class="badge">ğŸ„ğŸ„ğŸ„</span> Ã—20</div>
          <div class="card"><span class="badge">â­ï¸â­ï¸â­ï¸</span> Ã—10</div>
          <div class="card"><span class="badge">ğŸ””ğŸ””ğŸ””</span> Ã—10</div>
          <div class="card"><span class="badge">ä»»æ„ä¸‰åŒ</span> Ã—5</div>
          <div class="card"><span class="badge">ä»»æ„å…©åŒ</span> Ã—2</div>
        </div>
      </div>

      <footer>å°æç¤ºï¼šé€£çºŒè½‰å¹¾è¼ªæš–æ©Ÿä¸€ä¸‹ï¼Œç¥ä½ è–èª•å¥½é‹ï¼ğŸ„</footer>
    </section>
  </main>

  <script>
    // ====== åŸºæœ¬è³‡æ–™ ======
    const SYMBOLS = ["ğŸ…","ğŸ„","ğŸ","â„ï¸","â›„","ğŸ””","â­ï¸"];
    const reels = [document.getElementById('r0'), document.getElementById('r1'), document.getElementById('r2')];
    const btnSpin = document.getElementById('spin');
    const btnReset = document.getElementById('reset');
    const selBet = document.getElementById('bet');
    const elBalance = document.getElementById('balance').querySelector('strong');
    const elLastWin = document.getElementById('lastWin').querySelector('strong');
    const elMsg = document.getElementById('msg');

    let balance = 100;
    let spinning = false;

    // ====== åˆå§‹åŒ–ç‡ˆæ³¡èˆ‡é£„é›ª ======
    function initBulbs(){
      const wrap = document.getElementById('bulbs');
      const rect = document.querySelector('.machine').getBoundingClientRect();
      const per = 20; // ç‡ˆæ³¡é–“è·åƒç´ 
      const perW = Math.floor(rect.width / per);
      const perH = Math.floor(rect.height / per);
      const makeBulb = (x,y)=>{
        const i=document.createElement('i'); i.style.left=x+'px'; i.style.top=y+'px'; wrap.appendChild(i);
      };
      for(let x=8; x<rect.width-8; x+=per) { makeBulb(x,8); makeBulb(x, rect.height-12); }
      for(let y=8; y<rect.height-8; y+=per) { makeBulb(8,y); makeBulb(rect.width-12, y); }
    }
    function initSnow(){
      const snow = document.getElementById('snow');
      const count = 120;
      for(let i=0;i<count;i++){
        const s = document.createElement('span');
        const size = (Math.random()*6)+2; s.style.width=s.style.height=size+'px';
        const left = Math.random()*100; s.style.left=left+'vw';
        const dur = 6 + Math.random()*10; s.style.animationDuration = dur+'s';
        const drift = (Math.random()*40-20)+'vw'; s.style.setProperty('--tx', drift);
        s.style.animationDelay = (-Math.random()*dur)+'s';
        snow.appendChild(s);
      }
    }

    // ====== å·¥å…· ======
    const randSym = ()=> SYMBOLS[Math.floor(Math.random()*SYMBOLS.length)];
    function animateReel(reel, stopAfter){
      reel.classList.add('spinning');
      let t = 0; const iv = setInterval(()=>{ reel.textContent = randSym(); }, 60);
      return new Promise(res=> setTimeout(()=>{ clearInterval(iv); reel.classList.remove('spinning'); res(); }, stopAfter));
    }

    function calcPayout(syms, bet){
      const [a,b,c] = syms; let win=0; let msg='';
      const allSame = (a===b && b===c);
      const twoSame = (a===b || a===c || b===c);
      if(allSame){
        if(a==='ğŸ…') { win = bet*50; msg='Ho Ho Ho! ä¸‰å€‹è–èª•è€äººï¼Ã—50'; }
        else if(['ğŸ','ğŸ„'].includes(a)) { win=bet*20; msg='ç¯€æ…¶å¤§çï¼Ã—20'; }
        else if(['â­ï¸','ğŸ””'].includes(a)) { win=bet*10; msg='è€€çœ¼ä¹‹æ˜Ÿ/æ…¶é˜ï¼Ã—10'; }
        else { win=bet*5; msg='ä¸‰é€£ç·šï¼Ã—5'; }
      }else if(twoSame){
        win = bet*2; msg='å…©å€‹ç›¸åŒï¼ŒÃ—2';
      }
      return {win, msg: win>0 ? msg : 'å†æ¥å†å²ï½'};
    }

    function setMsg(text, isWin){
      elMsg.textContent = text;
      elMsg.className = 'message '+(isWin? 'win':'lose');
    }

    function updateStats(win){
      elBalance.textContent = '$'+balance;
      elLastWin.textContent = '$'+win;
    }

    function setDisabled(dis){ btnSpin.disabled = dis; selBet.disabled = dis; }

    // ====== äº’å‹• ======
    btnSpin.addEventListener('click', async ()=>{
      if(spinning) return; const bet = Number(selBet.value);
      if(balance < bet){ setMsg('é¤˜é¡ä¸è¶³ï¼Œè«‹é™ä½ä¸‹æ³¨æˆ–é‡ç½®ã€‚', false); return; }
      spinning = true; setDisabled(true); setMsg('è½‰å•Šè½‰ï½ç¥å¥½é‹ï¼', false);

      balance -= bet; updateStats(0);

      // ä¾åºåœè¼ªï¼Œè£½é€ æœŸå¾…æ„Ÿ
      const seq = [620, 980, 1300];
      await animateReel(reels[0], seq[0]);
      await animateReel(reels[1], seq[1]);
      await animateReel(reels[2], seq[2]);

      // æœ€çµ‚çµæœï¼ˆå›ºå®šé¡¯ç¤ºä¸€æ¬¡éš¨æ©Ÿï¼‰
      const final = [randSym(), randSym(), randSym()];
      reels.forEach((r,i)=> r.textContent = final[i]);

      const {win, msg} = calcPayout(final, bet);
      balance += win; updateStats(win);
      setMsg(msg + (win>0? ` è´å¾— $${win}!` : ''), win>0);

      if(balance<=0){ setMsg('å·²ç ´ç”¢ ğŸ’¸ æŒ‰ã€Œé‡ç½®ã€å†ä¾†ä¸€æŠŠï¼', false); }
      spinning = false; setDisabled(false);
    });

    btnReset.addEventListener('click', ()=>{
      balance = 100; updateStats(0); setMsg('å·²é‡ç½®ï¼Œç¥ä½ è–èª•å¥½é‹ï¼', false);
      reels[0].textContent='ğŸ„'; reels[1].textContent='ğŸ'; reels[2].textContent='â„ï¸';
    });

    // ====== å•Ÿå‹• ======
    window.addEventListener('load', ()=>{
      initBulbs(); initSnow(); updateStats(0);
    });
    window.addEventListener('resize', ()=>{
      const bulbs = document.getElementById('bulbs'); bulbs.innerHTML=''; initBulbs();
    });
  </script>
</body>
</html>
